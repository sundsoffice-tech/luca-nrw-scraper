{% extends 'crm/base.html' %}

{% block title %}Edit {{ form.name }} - TELIS CRM{% endblock %}

{% block content %}
<div class="p-6">
    <!-- Header -->
    <div class="mb-6 flex items-center justify-between">
        <div>
            <h1 class="text-3xl font-bold text-white mb-2">‚öôÔ∏è Edit Form Settings</h1>
            <p class="text-gray-400">{{ form.name }}</p>
        </div>
        <a href="{% url 'forms:detail' form.slug %}" 
           class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition">
            ‚Üê Back
        </a>
    </div>

    <div class="max-w-3xl">
        <form method="POST" class="bg-dark-800 rounded-lg p-6 border border-dark-700">
            {% csrf_token %}
            
            <div class="space-y-6">
                <!-- Basic Settings -->
                <div class="pb-6 border-b border-dark-700">
                    <h2 class="text-xl font-bold text-white mb-4">Basic Settings</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Form Name *</label>
                            <input type="text" name="name" value="{{ form.name }}" required 
                                   class="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded text-white focus:border-primary focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Description</label>
                            <textarea name="description" rows="3" 
                                      class="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded text-white focus:border-primary focus:outline-none">{{ form.description }}</textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Status</label>
                            <select name="status" 
                                    class="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded text-white focus:border-primary focus:outline-none">
                                <option value="draft" {% if form.status == 'draft' %}selected{% endif %}>Draft</option>
                                <option value="published" {% if form.status == 'published' %}selected{% endif %}>Published</option>
                                <option value="archived" {% if form.status == 'archived' %}selected{% endif %}>Archived</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Form Behavior -->
                <div class="pb-6 border-b border-dark-700">
                    <h2 class="text-xl font-bold text-white mb-4">Form Behavior</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Submit Button Text</label>
                            <input type="text" name="submit_button_text" value="{{ form.submit_button_text }}" 
                                   class="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded text-white focus:border-primary focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Success Message</label>
                            <textarea name="success_message" rows="2" 
                                      class="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded text-white focus:border-primary focus:outline-none">{{ form.success_message }}</textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Redirect URL (optional)</label>
                            <input type="url" name="redirect_url" value="{{ form.redirect_url }}" 
                                   placeholder="https://example.com/thank-you"
                                   class="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded text-white focus:border-primary focus:outline-none">
                            <p class="text-xs text-gray-500 mt-1">Leave empty to show success message instead</p>
                        </div>
                    </div>
                </div>
                
                <!-- Integrations -->
                <div>
                    <h2 class="text-xl font-bold text-white mb-4">Integrations</h2>
                    
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <input type="checkbox" name="save_to_leads" id="save_to_leads" 
                                   {% if form.save_to_leads %}checked{% endif %}
                                   class="mt-1 mr-3">
                            <div class="flex-1">
                                <label for="save_to_leads" class="block font-medium text-white cursor-pointer">
                                    Save submissions to Leads database
                                </label>
                                <p class="text-sm text-gray-400 mt-1">
                                    Automatically create a lead entry for each form submission
                                </p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <input type="checkbox" name="send_email_notification" id="send_email_notification" 
                                   {% if form.send_email_notification %}checked{% endif %}
                                   class="mt-1 mr-3">
                            <div class="flex-1">
                                <label for="send_email_notification" class="block font-medium text-white cursor-pointer">
                                    Send email notifications
                                </label>
                                <p class="text-sm text-gray-400 mt-1">
                                    Get notified when someone submits the form
                                </p>
                            </div>
                        </div>
                        
                        <div class="ml-6">
                            <label class="block text-sm font-medium text-gray-300 mb-2">Notification Email</label>
                            <input type="email" name="notification_email" value="{{ form.notification_email }}" 
                                   placeholder="notifications@example.com"
                                   class="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded text-white focus:border-primary focus:outline-none">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Actions -->
            <div class="flex gap-3 mt-8 pt-6 border-t border-dark-700">
                <button type="submit" 
                        class="px-6 py-2 bg-primary hover:bg-cyan-600 text-white font-semibold rounded-lg transition">
                    üíæ Save Settings
                </button>
                <a href="{% url 'forms:detail' form.slug %}" 
                   class="px-6 py-2 bg-dark-700 hover:bg-dark-600 text-white font-semibold rounded-lg transition">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
